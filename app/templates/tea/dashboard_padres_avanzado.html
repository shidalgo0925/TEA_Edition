<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üë®‚Äçüë©‚Äçüëß Dashboard de Padres - TEA Edition</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #2C3E50;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .nav-button {
            position: absolute;
            top: 25px;
            left: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .header-title {
            font-size: 2.5rem;
            color: #2C3E50;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .header-subtitle {
            font-size: 1.2rem;
            color: #7F8C8D;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .child-info {
            background: linear-gradient(135deg, #3498DB, #2ECC71);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .child-name {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .child-details {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        /* Navegaci√≥n de pesta√±as */
        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-weight: bold;
            color: #7F8C8D;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #3498DB, #2ECC71);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .tab:hover:not(.active) {
            background: rgba(52, 152, 219, 0.1);
            color: #3498DB;
        }
        
        /* Contenido de pesta√±as */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Grid de estad√≠sticas */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-left: 5px solid #3498DB;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #3498DB;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 1.1rem;
            color: #7F8C8D;
            font-weight: bold;
        }
        
        .stat-change {
            font-size: 0.9rem;
            margin-top: 10px;
            padding: 5px 10px;
            border-radius: 15px;
            display: inline-block;
        }
        
        .stat-change.positive {
            background: #D5F4E6;
            color: #27AE60;
        }
        
        .stat-change.negative {
            background: #FADBD8;
            color: #E74C3C;
        }
        
        /* Gr√°ficos */
        .charts-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            font-size: 1.5rem;
            color: #2C3E50;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        .chart-canvas {
            max-height: 300px;
        }
        
        /* Tabla de actividades */
        .activities-table {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .table-title {
            font-size: 1.5rem;
            color: #2C3E50;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ECF0F1;
        }
        
        .table th {
            background: #F8F9FA;
            font-weight: bold;
            color: #2C3E50;
        }
        
        .table tr:hover {
            background: #F8F9FA;
        }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .status-completed {
            background: #D5F4E6;
            color: #27AE60;
        }
        
        .status-in-progress {
            background: #FEF9E7;
            color: #F39C12;
        }
        
        .status-available {
            background: #EBF3FD;
            color: #3498DB;
        }
        
        /* Botones de acci√≥n */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .btn-action {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #27AE60, #2ECC71);
            color: white;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #3498DB, #2980B9);
            color: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #F39C12, #E67E22);
            color: white;
            box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
        }
        
        .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }
        
        /* Filtros */
        .filters {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .filter-group {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .filter-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .filter-label {
            font-size: 0.9rem;
            color: #7F8C8D;
            font-weight: bold;
        }
        
        .filter-control {
            padding: 8px 12px;
            border: 2px solid #ECF0F1;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .filter-control:focus {
            outline: none;
            border-color: #3498DB;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header-title {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .filter-group {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <a href="/tea/nino/" class="nav-button" aria-label="Volver al dashboard del ni√±o">
                ‚Üê Volver al Ni√±o
            </a>
            
            <h1 class="header-title">üë®‚Äçüë©‚Äçüëß Dashboard de Padres</h1>
            <p class="header-subtitle">Monitoreo y seguimiento del progreso de aprendizaje</p>
            
            <div class="child-info">
                <div class="child-name">{{ nino.nombre if nino else 'Ana' }}</div>
                <div class="child-details">
                    Edad: {{ nino.edad if nino else '6' }} a√±os | 
                    Nivel: {{ nino.nivel_dificultad if nino else 'B√°sico' }} | 
                    √öltima sesi√≥n: {{ ultima_sesion if ultima_sesion else 'Hoy' }}
                </div>
            </div>
        </div>

        <!-- Navegaci√≥n de pesta√±as -->
        <div class="tabs">
            <div class="tab active" onclick="showTab('overview')">
                üìä Resumen
            </div>
            <div class="tab" onclick="showTab('progress')">
                üìà Progreso
            </div>
            <div class="tab" onclick="showTab('activities')">
                üéØ Actividades
            </div>
            <div class="tab" onclick="showTab('reports')">
                üìã Reportes
            </div>
            <div class="tab" onclick="showTab('settings')">
                ‚öôÔ∏è Configuraci√≥n
            </div>
        </div>

        <!-- Pesta√±a: Resumen -->
        <div id="overview" class="tab-content active">
            <!-- Estad√≠sticas principales -->
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-icon">‚≠ê</span>
                    <div class="stat-number" id="totalPoints">0</div>
                    <div class="stat-label">Puntos Totales</div>
                    <div class="stat-change positive" id="pointsChange">+15 esta semana</div>
                </div>
                
                <div class="stat-card">
                    <span class="stat-icon">üéØ</span>
                    <div class="stat-number" id="completedActivities">0</div>
                    <div class="stat-label">Actividades Completadas</div>
                    <div class="stat-change positive" id="activitiesChange">+3 esta semana</div>
                </div>
                
                <div class="stat-card">
                    <span class="stat-icon">üî•</span>
                    <div class="stat-number" id="consecutiveDays">0</div>
                    <div class="stat-label">D√≠as Consecutivos</div>
                    <div class="stat-change positive" id="daysChange">+2 d√≠as</div>
                </div>
                
                <div class="stat-card">
                    <span class="stat-icon">üèÜ</span>
                    <div class="stat-number" id="totalMedals">0</div>
                    <div class="stat-label">Medallas Obtenidas</div>
                    <div class="stat-change positive" id="medalsChange">+1 esta semana</div>
                </div>
            </div>

            <!-- Gr√°ficos principales -->
            <div class="charts-section">
                <div class="chart-container">
                    <h3 class="chart-title">Progreso por Categor√≠a</h3>
                    <canvas id="categoryProgressChart" class="chart-canvas"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">Actividades por D√≠a (√öltima Semana)</h3>
                    <canvas id="dailyActivitiesChart" class="chart-canvas"></canvas>
                </div>
            </div>
        </div>

        <!-- Pesta√±a: Progreso -->
        <div id="progress" class="tab-content">
            <div class="charts-section">
                <div class="chart-container">
                    <h3 class="chart-title">Evoluci√≥n de Puntos</h3>
                    <canvas id="pointsEvolutionChart" class="chart-canvas"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">Tiempo de Sesi√≥n Promedio</h3>
                    <canvas id="sessionTimeChart" class="chart-canvas"></canvas>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-icon">üìä</span>
                    <div class="stat-number" id="averageScore">0%</div>
                    <div class="stat-label">Puntuaci√≥n Promedio</div>
                </div>
                
                <div class="stat-card">
                    <span class="stat-icon">‚è±Ô∏è</span>
                    <div class="stat-number" id="averageTime">0 min</div>
                    <div class="stat-label">Tiempo Promedio por Sesi√≥n</div>
                </div>
                
                <div class="stat-card">
                    <span class="stat-icon">üéØ</span>
                    <div class="stat-number" id="completionRate">0%</div>
                    <div class="stat-label">Tasa de Completaci√≥n</div>
                </div>
                
                <div class="stat-card">
                    <span class="stat-icon">üìà</span>
                    <div class="stat-number" id="improvementRate">0%</div>
                    <div class="stat-label">Tasa de Mejora</div>
                </div>
            </div>
        </div>

        <!-- Pesta√±a: Actividades -->
        <div id="activities" class="tab-content">
            <!-- Filtros -->
            <div class="filters">
                <div class="filter-group">
                    <div class="filter-item">
                        <label class="filter-label">Categor√≠a</label>
                        <select class="filter-control" id="categoryFilter">
                            <option value="">Todas las categor√≠as</option>
                            <option value="lenguaje">Lenguaje</option>
                            <option value="numeros">N√∫meros</option>
                            <option value="colores">Colores</option>
                            <option value="animales">Animales</option>
                        </select>
                    </div>
                    
                    <div class="filter-item">
                        <label class="filter-label">Estado</label>
                        <select class="filter-control" id="statusFilter">
                            <option value="">Todos los estados</option>
                            <option value="completed">Completadas</option>
                            <option value="in-progress">En Progreso</option>
                            <option value="available">Disponibles</option>
                        </select>
                    </div>
                    
                    <div class="filter-item">
                        <label class="filter-label">Fecha</label>
                        <input type="date" class="filter-control" id="dateFilter">
                    </div>
                    
                    <div class="filter-item">
                        <label class="filter-label">&nbsp;</label>
                        <button class="btn-action btn-secondary" onclick="applyFilters()">
                            üîç Filtrar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tabla de actividades -->
            <div class="activities-table">
                <h3 class="table-title">Historial de Actividades</h3>
                <table class="table" id="activitiesTable">
                    <thead>
                        <tr>
                            <th>Actividad</th>
                            <th>Categor√≠a</th>
                            <th>Estado</th>
                            <th>Puntos</th>
                            <th>Fecha</th>
                            <th>Tiempo</th>
                        </tr>
                    </thead>
                    <tbody id="activitiesTableBody">
                        <!-- Se llena din√°micamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pesta√±a: Reportes -->
        <div id="reports" class="tab-content">
            <div class="action-buttons">
                <button class="btn-action btn-primary" onclick="generatePDFReport()">
                    üìÑ Generar PDF
                </button>
                <button class="btn-action btn-secondary" onclick="generateExcelReport()">
                    üìä Exportar Excel
                </button>
                <button class="btn-action btn-warning" onclick="generateDetailedReport()">
                    üìã Reporte Detallado
                </button>
            </div>
            
            <div class="charts-section">
                <div class="chart-container">
                    <h3 class="chart-title">Resumen Semanal</h3>
                    <canvas id="weeklySummaryChart" class="chart-canvas"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">Comparaci√≥n Mensual</h3>
                    <canvas id="monthlyComparisonChart" class="chart-canvas"></canvas>
                </div>
            </div>
        </div>

        <!-- Pesta√±a: Configuraci√≥n -->
        <div id="settings" class="tab-content">
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-icon">‚è∞</span>
                    <div class="stat-number">{{ nino.tiempo_sesion_min if nino else '15' }} min</div>
                    <div class="stat-label">Tiempo de Sesi√≥n</div>
                </div>
                
                <div class="stat-card">
                    <span class="stat-icon">üéØ</span>
                    <div class="stat-number">{{ nino.nivel_dificultad if nino else 'B√°sico' }}</div>
                    <div class="stat-label">Nivel de Dificultad</div>
                </div>
                
                <div class="stat-card">
                    <span class="stat-icon">üë§</span>
                    <div class="stat-number">{{ nino.avatar_preferido if nino else 'Maestra Ana' }}</div>
                    <div class="stat-label">Avatar Preferido</div>
                </div>
                
                <div class="stat-card">
                    <span class="stat-icon">üìÖ</span>
                    <div class="stat-number">{{ dias_activos if dias_activos else '5' }}</div>
                    <div class="stat-label">D√≠as Activos</div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn-action btn-primary" onclick="updateChildSettings()">
                    ‚öôÔ∏è Actualizar Configuraci√≥n
                </button>
                <button class="btn-action btn-secondary" onclick="resetProgress()">
                    üîÑ Reiniciar Progreso
                </button>
                <button class="btn-action btn-warning" onclick="exportData()">
                    üíæ Exportar Datos
                </button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let charts = {};
        let currentTab = 'overview';
        
        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
            initializeCharts();
            loadActivitiesTable();
        });
        
        // Cargar datos del dashboard
        async function loadDashboardData() {
            try {
                const response = await fetch('/tea/padres/api/estadisticas');
                const data = await response.json();
                
                if (data.success) {
                    updateStats(data.estadisticas);
                    updateCharts(data.estadisticas);
                }
            } catch (error) {
                console.error('Error cargando datos del dashboard:', error);
            }
        }
        
        // Actualizar estad√≠sticas
        function updateStats(stats) {
            document.getElementById('totalPoints').textContent = stats.puntos_totales || 0;
            document.getElementById('completedActivities').textContent = stats.actividades_completadas || 0;
            document.getElementById('consecutiveDays').textContent = stats.dias_consecutivos || 0;
            document.getElementById('totalMedals').textContent = stats.medallas_obtenidas || 0;
            
            document.getElementById('averageScore').textContent = (stats.puntuacion_promedio || 0) + '%';
            document.getElementById('averageTime').textContent = (stats.tiempo_promedio || 0) + ' min';
            document.getElementById('completionRate').textContent = (stats.tasa_completacion || 0) + '%';
            document.getElementById('improvementRate').textContent = (stats.tasa_mejora || 0) + '%';
        }
        
        // Inicializar gr√°ficos
        function initializeCharts() {
            // Gr√°fico de progreso por categor√≠a
            const categoryCtx = document.getElementById('categoryProgressChart').getContext('2d');
            charts.categoryProgress = new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Lenguaje', 'N√∫meros', 'Colores', 'Animales'],
                    datasets: [{
                        data: [81.8, 45.5, 0, 33.3],
                        backgroundColor: ['#3498DB', '#2ECC71', '#F39C12', '#E74C3C'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Gr√°fico de actividades diarias
            const dailyCtx = document.getElementById('dailyActivitiesChart').getContext('2d');
            charts.dailyActivities = new Chart(dailyCtx, {
                type: 'bar',
                data: {
                    labels: ['Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b', 'Dom'],
                    datasets: [{
                        label: 'Actividades Completadas',
                        data: [3, 2, 3, 2, 5, 0, 0],
                        backgroundColor: '#3498DB',
                        borderColor: '#2980B9',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Gr√°fico de evoluci√≥n de puntos
            const pointsCtx = document.getElementById('pointsEvolutionChart').getContext('2d');
            charts.pointsEvolution = new Chart(pointsCtx, {
                type: 'line',
                data: {
                    labels: ['Sem 1', 'Sem 2', 'Sem 3', 'Sem 4'],
                    datasets: [{
                        label: 'Puntos Acumulados',
                        data: [25, 45, 78, 164],
                        borderColor: '#27AE60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderWidth: 3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Actualizar gr√°ficos
        function updateCharts(stats) {
            if (charts.categoryProgress && stats.progreso_por_categoria) {
                const progressData = stats.progreso_por_categoria;
                charts.categoryProgress.data.datasets[0].data = [
                    progressData.lenguaje?.porcentaje_completado || 0,
                    progressData.numeros?.porcentaje_completado || 0,
                    progressData.colores?.porcentaje_completado || 0,
                    progressData.animales?.porcentaje_completado || 0
                ];
                charts.categoryProgress.update();
            }
        }
        
        // Mostrar pesta√±a
        function showTab(tabName) {
            // Ocultar todas las pesta√±as
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remover clase active de todos los tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar pesta√±a seleccionada
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            currentTab = tabName;
            
            // Cargar datos espec√≠ficos de la pesta√±a
            if (tabName === 'activities') {
                loadActivitiesTable();
            } else if (tabName === 'reports') {
                loadReportsData();
            }
        }
        
        // Cargar tabla de actividades
        async function loadActivitiesTable() {
            try {
                const response = await fetch('/tea/padres/api/actividades');
                const data = await response.json();
                
                if (data.success) {
                    renderActivitiesTable(data.actividades);
                }
            } catch (error) {
                console.error('Error cargando actividades:', error);
            }
        }
        
        // Renderizar tabla de actividades
        function renderActivitiesTable(actividades) {
            const tbody = document.getElementById('activitiesTableBody');
            tbody.innerHTML = '';
            
            actividades.forEach(actividad => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${actividad.titulo}</td>
                    <td>${actividad.categoria}</td>
                    <td><span class="status-badge status-${actividad.estado}">${actividad.estado}</span></td>
                    <td>${actividad.puntos}</td>
                    <td>${actividad.fecha}</td>
                    <td>${actividad.tiempo} min</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        // Aplicar filtros
        function applyFilters() {
            const category = document.getElementById('categoryFilter').value;
            const status = document.getElementById('statusFilter').value;
            const date = document.getElementById('dateFilter').value;
            
            // Aqu√≠ se aplicar√≠a la l√≥gica de filtrado
            console.log('Filtros aplicados:', { category, status, date });
        }
        
        // Generar reporte PDF
        function generatePDFReport() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFontSize(20);
            doc.text('Reporte de Progreso - TEA Edition', 20, 20);
            
            doc.setFontSize(12);
            doc.text(`Ni√±o: ${document.querySelector('.child-name').textContent}`, 20, 40);
            doc.text(`Fecha: ${new Date().toLocaleDateString()}`, 20, 50);
            
            // Agregar estad√≠sticas
            doc.text('Estad√≠sticas:', 20, 70);
            doc.text(`Puntos Totales: ${document.getElementById('totalPoints').textContent}`, 20, 80);
            doc.text(`Actividades Completadas: ${document.getElementById('completedActivities').textContent}`, 20, 90);
            doc.text(`D√≠as Consecutivos: ${document.getElementById('consecutiveDays').textContent}`, 20, 100);
            
            doc.save('reporte-progreso-tea.pdf');
        }
        
        // Generar reporte Excel
        function generateExcelReport() {
            const data = [
                ['Actividad', 'Categor√≠a', 'Estado', 'Puntos', 'Fecha', 'Tiempo'],
                ['Repetir palabras', 'Lenguaje', 'Completada', '10', '2025-10-04', '5'],
                ['Contar del 1 al 5', 'N√∫meros', 'Completada', '15', '2025-10-04', '8'],
                // ... m√°s datos
            ];
            
            const ws = XLSX.utils.aoa_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Progreso');
            
            XLSX.writeFile(wb, 'reporte-progreso-tea.xlsx');
        }
        
        // Generar reporte detallado
        function generateDetailedReport() {
            // Implementar l√≥gica para reporte detallado
            alert('Generando reporte detallado...');
        }
        
        // Actualizar configuraci√≥n del ni√±o
        function updateChildSettings() {
            // Implementar l√≥gica para actualizar configuraci√≥n
            alert('Actualizando configuraci√≥n...');
        }
        
        // Reiniciar progreso
        function resetProgress() {
            if (confirm('¬øEst√°s seguro de que quieres reiniciar todo el progreso? Esta acci√≥n no se puede deshacer.')) {
                // Implementar l√≥gica para reiniciar progreso
                alert('Progreso reiniciado');
            }
        }
        
        // Exportar datos
        function exportData() {
            // Implementar l√≥gica para exportar datos
            alert('Exportando datos...');
        }
        
        // Cargar datos de reportes
        function loadReportsData() {
            // Implementar carga de datos espec√≠ficos para reportes
            console.log('Cargando datos de reportes...');
        }
    </script>
</body>
</html>




